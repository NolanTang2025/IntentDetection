# æ•°æ®å¤„ç†æµç¨‹ - å¿«é€Ÿå‚è€ƒ

## ğŸ¯ ä¸€å¥è¯æ€»ç»“
åŸå§‹ç”¨æˆ·æ„å›¾æ•°æ® â†’ æå– â†’ èšç±» â†’ ç”»åƒåˆ†æ â†’ å‰ç«¯å±•ç¤º

---

## ğŸ“‹ 7ä¸ªæ­¥éª¤æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤1: æ•°æ®æå–                                            â”‚
â”‚  è¾“å…¥: raw_data1126.csv (åŸå§‹CSV)                          â”‚
â”‚  è„šæœ¬: data_extract/extract_data.py                        â”‚
â”‚  è¾“å‡º: extracted_data_shop_{id}.json                        â”‚
â”‚  ä½œç”¨: ä»åŸå§‹æ•°æ®ä¸­æå–ç”¨æˆ·æ„å›¾åˆ†æç»“æœ                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤2: èšç±»åˆ†æ                                            â”‚
â”‚  è¾“å…¥: extracted_data_shop_{id}.json                        â”‚
â”‚  è„šæœ¬: cluster_timeClip/behavior_intent_clustering.py      â”‚
â”‚  è¾“å‡º: business_cluster_results_shop_{id}.json              â”‚
â”‚  ä½œç”¨: åŸºäºæ„å›¾å˜åŒ–è¿›è¡Œæ—¶é—´åˆ‡ç‰‡ï¼Œç„¶åèšç±»ç”¨æˆ·è¡Œä¸º           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤3: èšç±»ç»“æœåˆ†æ                                        â”‚
â”‚  è¾“å…¥: business_cluster_results_shop_{id}.json              â”‚
â”‚  è„šæœ¬: cluster_timeClip/cluster_analysis.py                â”‚
â”‚  è¾“å‡º: cluster_analysis_shop_{id}.json                      â”‚
â”‚  ä½œç”¨: è®¡ç®—èšç±»ç»Ÿè®¡ä¿¡æ¯ï¼ˆç”¨æˆ·æ•°ã€ç‰‡æ®µæ•°ã€åˆ†å¸ƒç­‰ï¼‰           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤4: ç”¨æˆ·ç”»åƒåˆ†æ                                        â”‚
â”‚  è¾“å…¥: business_cluster_results_shop_{id}.json              â”‚
â”‚  è„šæœ¬: user_portrait_analysis/business_driven_portrait_...  â”‚
â”‚  è¾“å‡º: business_driven_insights_shop_{id}.json              â”‚
â”‚  ä½œç”¨: ä¸ºæ¯ä¸ªèšç±»ç”Ÿæˆè¥é”€ç­–ç•¥å’Œä¸šåŠ¡æ´å¯Ÿ                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤5: å‰ç«¯æ•°æ®æ›´æ–°                                        â”‚
â”‚  è¾“å…¥: èšç±»ç»“æœ + ä¸šåŠ¡æ´å¯Ÿ                                   â”‚
â”‚  è„šæœ¬: visualization_dashboard/update_data.py                â”‚
â”‚  è¾“å‡º: data_shop_{id}.js                                    â”‚
â”‚  ä½œç”¨: å°†æ•°æ®è½¬æ¢ä¸ºå‰ç«¯å¯ç”¨çš„JavaScriptæ ¼å¼                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤6: å¤šåº—é“ºæ•°æ®åˆå¹¶                                      â”‚
â”‚  è¾“å…¥: æ‰€æœ‰åº—é“ºçš„ data_shop_{id}.js                         â”‚
â”‚  è„šæœ¬: visualization_dashboard/create_multi_shop_dashboard.pyâ”‚
â”‚  è¾“å‡º: multi_shop_data.js                                   â”‚
â”‚  ä½œç”¨: åˆå¹¶æ‰€æœ‰åº—é“ºæ•°æ®åˆ°ä¸€ä¸ªæ–‡ä»¶                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤7: å‰ç«¯å¯è§†åŒ–                                          â”‚
â”‚  è¾“å…¥: multi_shop_data.js                                   â”‚
â”‚  æ–‡ä»¶: dashboard.js + index.html                            â”‚
â”‚  è¾“å‡º: å¯è§†åŒ–ä»ªè¡¨æ¿ï¼ˆç½‘é¡µï¼‰                                 â”‚
â”‚  ä½œç”¨: åœ¨æµè§ˆå™¨ä¸­å±•ç¤ºèšç±»ç»“æœã€ç”¨æˆ·è½¨è¿¹ã€è¥é”€ç­–ç•¥ç­‰         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”‘ å…³é”®æ¦‚å¿µ

### æ—¶é—´åˆ‡ç‰‡ (Time Segmentation)
- **ç›®çš„**: å°†ç”¨æˆ·è¿ç»­çš„è¡Œä¸ºæŒ‰æ„å›¾å˜åŒ–åˆ‡åˆ†æˆå¤šä¸ªç‰‡æ®µ
- **è§„åˆ™**: 
  - æ„å›¾å˜åŒ–è¶…è¿‡é˜ˆå€¼ï¼ˆ0.3ï¼‰â†’ æ–°ç‰‡æ®µ
  - æ—¶é—´é—´éš”è¶…è¿‡10åˆ†é’Ÿ â†’ å¯èƒ½æ–°ç‰‡æ®µ
  - ä¸æ´»è·ƒè¶…è¿‡15åˆ†é’Ÿ â†’ å¼ºåˆ¶æ–°ç‰‡æ®µ

### èšç±» (Clustering)
- **æ–¹æ³•**: K-Meansç®—æ³•
- **ç‰¹å¾**: è¡Œä¸ºç‰¹å¾ï¼ˆæ—¶é•¿ã€äº¤äº’æ¬¡æ•°ã€æ„å›¾å¼ºåº¦ï¼‰+ ä¸šåŠ¡ç‰¹å¾ï¼ˆè´­ä¹°é˜¶æ®µã€ä»·æ ¼æ•æ„Ÿåº¦ç­‰ï¼‰
- **ç»“æœ**: å°†ç›¸ä¼¼çš„æ„å›¾ç‰‡æ®µå½’ä¸ºä¸€ç±»

### ä¸šåŠ¡æ´å¯Ÿ (Business Insights)
- **å†…å®¹**: è¥é”€ç­–ç•¥ã€äº§å“æ¨èã€è½¬åŒ–ä¼˜åŒ–å»ºè®®ç­‰
- **ç”Ÿæˆ**: åŸºäºèšç±»ç‰¹å¾è‡ªåŠ¨ç”Ÿæˆå·®å¼‚åŒ–ç­–ç•¥

---

## ğŸš€ å¿«é€Ÿæ‰§è¡Œ

### æ–¹æ³•1: è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
cd æ„å›¾clusteräº§å“
python3 automated_analysis.py
```

### æ–¹æ³•2: æ‰‹åŠ¨æ‰§è¡Œ
```bash
# æ­¥éª¤1: æ•°æ®æå–
cd data_extract
python3 extract_data.py

# æ­¥éª¤2-3: èšç±»åˆ†æ
cd ../cluster_timeClip
python3 behavior_intent_clustering.py

# æ­¥éª¤4: ç”¨æˆ·ç”»åƒ
cd ../user_portrait_analysis
python3 business_driven_portrait_analyzer.py

# æ­¥éª¤5: å‰ç«¯æ›´æ–°
cd ../visualization_dashboard
python3 update_data.py
```

---

## ğŸ“Š æ•°æ®æ ¼å¼ç¤ºä¾‹

### è¾“å…¥ (åŸå§‹æ•°æ®)
```csv
name,userId,sessionId,timestamp,output
analyze_intent_and_rate_tags,user123,session456,2024-01-01T10:00:00Z,"{""intent"":{...},""intent_score"":0.8}"
```

### ä¸­é—´æ•°æ® (èšç±»ç»“æœ)
```json
{
  "segments": [
    {
      "user_id": "user123",
      "start_time": "2024-01-01T10:00:00Z",
      "duration_minutes": 15.0,
      "intent_score": 0.75,
      "business_cluster": "1"
    }
  ],
  "clustering": {
    "cluster_labels": {
      "1": {
        "short_label": "æ¿€æ´»é˜¶æ®µÂ·ä¸­ç´§è¿«"
      }
    }
  }
}
```

### è¾“å‡º (å‰ç«¯æ•°æ®)
```javascript
const businessInsights = [
  {
    cluster_id: "1",
    cluster_name: "æ¿€æ´»é˜¶æ®µÂ·ä¸­ç´§è¿«",
    marketing_strategy: ["ç­–ç•¥1", "ç­–ç•¥2"],
    product_recommendations: ["æ¨è1"]
  }
];
```

---

## ğŸ“ æ–‡ä»¶ä½ç½®é€ŸæŸ¥

| æ­¥éª¤ | è¾“å…¥æ–‡ä»¶ | è¾“å‡ºæ–‡ä»¶ |
|------|---------|---------|
| 1 | `data_extract/raw_data1126.csv` | `data_extract/extracted_data_shop_{id}.json` |
| 2 | `extracted_data_shop_{id}.json` | `cluster_timeClip/business_cluster_results_shop_{id}.json` |
| 3 | `business_cluster_results_shop_{id}.json` | `cluster_timeClip/cluster_analysis_shop_{id}.json` |
| 4 | `business_cluster_results_shop_{id}.json` | `user_portrait_analysis/business_driven_insights_shop_{id}.json` |
| 5 | èšç±»ç»“æœ + ä¸šåŠ¡æ´å¯Ÿ | `visualization_dashboard/data_shop_{id}.js` |
| 6 | æ‰€æœ‰åº—é“ºçš„ `data_shop_{id}.js` | `visualization_dashboard/multi_shop_data.js` |
| 7 | `multi_shop_data.js` | æµè§ˆå™¨ä¸­çš„å¯è§†åŒ–é¡µé¢ |

---

## âš™ï¸ é…ç½®è¦ç‚¹

1. **åº—é“ºåˆ—è¡¨**: åœ¨ `automated_analysis.py` ä¸­ä¿®æ”¹ `SHOPS = [28, 29, 39, 49, 53, 'YUP']`
2. **APIå¯†é’¥**: åº—é“º39éœ€è¦Gemini APIå¯†é’¥ï¼ˆåœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ï¼‰
3. **èšç±»å‚æ•°**: åœ¨ `behavior_intent_clustering.py` ä¸­è°ƒæ•´é˜ˆå€¼å‚æ•°

---

## ğŸ¯ æ ¸å¿ƒè¾“å‡º

æœ€ç»ˆåœ¨dashboardä¸­å¯ä»¥çœ‹åˆ°ï¼š
- âœ… æ‰€æœ‰èšç±»çš„åˆ—è¡¨å’Œç»Ÿè®¡
- âœ… æ¯ä¸ªèšç±»çš„è¯¦ç»†ç‰¹å¾å’Œç­–ç•¥
- âœ… ç”¨æˆ·è¡Œä¸ºè½¨è¿¹æ—¶é—´çº¿
- âœ… æ—¶é—´åºåˆ—åˆ†æå›¾è¡¨
- âœ… ä¸šåŠ¡æ´å¯Ÿå’Œè¥é”€å»ºè®®

---

**è¯¦ç»†æ–‡æ¡£**: æŸ¥çœ‹ `DATA_PROCESSING_FLOW.md` è·å–å®Œæ•´è¯´æ˜

